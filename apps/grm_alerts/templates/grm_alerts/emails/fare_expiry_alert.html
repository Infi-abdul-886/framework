{% extends "grm_alerts/emails/base_alert.html" %}

{% block content %}
<p>You have <strong>{{ record_count }}</strong> request(s) with fare offers that will expire soon.</p>

<div class="alert-box {% if expiry_hours <= 24 %}urgent{% endif %}">
    <strong>Expiry Time:</strong> 
    {% if expiry_hours <= 1 %}
        <span class="highlight">Less than 1 hour remaining</span>
    {% elif expiry_hours <= 24 %}
        <span class="highlight">{{ expiry_hours|floatformat:1 }} hours remaining</span>
    {% else %}
        {{ expiry_hours|floatformat:1 }} hours remaining
    {% endif %}
</div>

<p>Please review the following requests and take appropriate action before the fare expires:</p>
{% endblock %}

{% block details_table %}
<table class="details-table">
    <thead>
        <tr>
            <th>Request ID</th>
            <th>Group Name</th>
            <th>Fare Amount</th>
            <th>Currency</th>
            <th>Expiry Date</th>
            <th>Passengers</th>
        </tr>
    </thead>
    <tbody>
        {% for record in records %}
        <tr>
            <td>{{ record.request_master_id }}</td>
            <td>{{ record.request_group_name|default:"N/A" }}</td>
            <td>{{ record.fare_advised|floatformat:2 }}</td>
            <td>{{ record.user_currency }}</td>
            <td>{{ record.fare_expiry_date }}</td>
            <td>{{ record.number_of_passenger }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<p>
    <a href="#" class="btn">View Requests in GRM System</a>
    <a href="#" class="btn">Contact Support</a>
</p>
{% endblock %}