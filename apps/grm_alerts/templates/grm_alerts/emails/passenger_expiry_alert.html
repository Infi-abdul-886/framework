{% extends "grm_alerts/emails/base_alert.html" %}

{% block content %}
<p>You have <strong>{{ record_count }}</strong> PNR(s) requiring passenger details submission that will expire soon.</p>

<div class="alert-box {% if expiry_hours <= 24 %}urgent{% endif %}">
    <strong>Submission Deadline:</strong> 
    {% if expiry_hours <= 1 %}
        <span class="highlight">Less than 1 hour remaining</span>
    {% elif expiry_hours <= 24 %}
        <span class="highlight">{{ expiry_hours|floatformat:1 }} hours remaining</span>
    {% else %}
        {{ expiry_hours|floatformat:1 }} hours remaining
    {% endif %}
</div>

<p>Please submit complete passenger details before the deadline:</p>
{% endblock %}

{% block details_table %}
<table class="details-table">
    <thead>
        <tr>
            <th>PNR</th>
            <th>Request ID</th>
            <th>Total Passengers</th>
            <th>Submitted</th>
            <th>Pending</th>
            <th>Deadline</th>
        </tr>
    </thead>
    <tbody>
        {% for record in records %}
        <tr>
            <td><strong>{{ record.pnr }}</strong></td>
            <td>{{ record.request_master_id }}</td>
            <td>{{ record.number_of_passenger }}</td>
            <td>{{ record.submitted_count|default:0 }}</td>
            <td>{{ record.pending_count|default:record.number_of_passenger }}</td>
            <td>{{ record.passenger_validity_date }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<p>
    <a href="#" class="btn">Submit Passenger Details</a>
    <a href="#" class="btn">View Requirements</a>
</p>
{% endblock %}